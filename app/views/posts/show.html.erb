<div class="container mt-5">
<h2>Post Details</h2>
  <div class="d-flex align-items-start mb-4">
    <div class="border p-3 flex-grow-1 d-flex flex-column">
    <h1><%= @post.title %></h1>
    <p>Written by: <%= @post.author.name %></p>
    <p><%= @post.text %></p>
      <div class="mt-auto text-right">
        <small><%= @post.likes_counter %> likes</small>
        <small><%= @post.comments_counter %> comments</small>
      </div>
    </div>
  </div>
  
  <div class="card">
    <div class="card-body">
      <h4>Comments</h4>
      <ul class="list-group">
      <% @recent_comments.each do |comment| %>
        <li class="list-group-item">
          <strong><%= comment.author.name %></strong>: <%= comment.text %>
          <% if can? :destroy, comment %>
          <%= button_to 'Delete', user_post_comment_deletion_path(@post.author, @post, comment), method: :delete, data: { confirm: 'Are you sure?' } %>
          <% end %>
        </li>
      <% end %>
   </ul>   
    </div>
  </div>

  <%= form_with model: [@post, Comment.new], url: user_post_comments_path(params[:user_id], @post), local: true do |form| %>
    <%= form.label :text, "Add a Comment:" %>
    <%= form.text_area :text %>
    <%= form.submit "Comment" %>
  <% end %>

  <div class="mt-3">
    <% if can? :destroy, @post %>
      <%= button_to 'Delete Post', user_post_deletion_path(@post.author, @post), method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class: "btn btn-danger mr-2" %>
    <% end %>
    <%= button_to 'Like', user_post_likes_path(params[:user_id], @post), class: "btn btn-primary" %>
  </div>
</div>
